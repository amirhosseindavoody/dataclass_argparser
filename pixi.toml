[workspace]
authors = ["Amirhossein Davoody <amirhossein.davoody@gmail.com>"]
channels = [
  "https://prefix.dev/conda-forge",
  "conda-forge",
]

platforms = ["linux-64", "osx-64", "osx-arm64", "win-64"]
preview = ["pixi-build"]

[dependencies]
dataclass-argparser = {path = "."}
ipython = ">=9.6.0,<10"
python-build = ">=1.0.0,<2"
twine = ">=5.1.0"

[tasks]
# Testing tasks
test = "pytest tests/"
test-coverage = "pytest --cov=src/dataclass_argparser --cov-report=html --cov-report=term tests/"
test-verbose = "pytest -v tests/"

# Example tasks
run-basic-example = "python examples/basic_example.py --help"
run-override-example = "python examples/override_example.py --help"

# Build tasks
build = "pixi build --clean --output-dir dist/"
build-pypi = "python -m build"
clean = "rm -rf build/ dist/ *.egg-info/ __pycache__/ .pytest_cache/ htmlcov/"

[tasks.test-all]
cmd = """
pytest tests/ && \
python examples/basic_example.py --name test --temperature 25.0 && \
python examples/override_example.py --config examples/example_config.json && \
python examples/custom_flags_example.py --config examples/example_config.json
"""

[tasks.demo]
cmd = """
echo "Running basic example with default values:" &&
python examples/basic_example.py --name "Demo Run" --temperature 30.0 --num-simulations 50 &&
echo "" &&
echo "Running override example with config file:" &&
python examples/override_example.py --config examples/example_config.json
"""

[package]
description = "A utility for creating command-line argument parsers from dataclasses"
name = "dataclass-argparser"
version = "1.0.0"

[package.build.backend]
name = "pixi-build-python"
version = "==0.4.0"

[package.build-dependencies]
pytest = ">=8.4.1,<9"

[package.host-dependencies]
hatchling = "*"

[package.run-dependencies]
python = ">=3.7"
pyyaml = ">=6.0.2,<7"
